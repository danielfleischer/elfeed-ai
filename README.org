#+TITLE: elfeed-ai
#+AUTHOR: Daniel Fleischer

AI-powered article summarization for [[https://github.com/skeeto/elfeed][elfeed]], using [[https://github.com/karthink/gptel][gptel]].

Mark articles in the elfeed search buffer, press =S=, and get
concise summaries in a dedicated Org buffer — powered by any LLM
backend that gptel supports (Claude, ChatGPT, Gemini, Ollama, etc.).

* Features

- Mark/unmark individual entries with =m= / =u= (or unmark all with =U=)
- Summarize multiple articles in one shot, asynchronously
- Output is a clean Org buffer with one heading per article, including
  feed name, date, and URL as properties
- Full gptel integration: configure model, backend, temperature,
  system prompt and more via =g= inside the menu
- The =Elfeed-AI= directive is registered in gptel's directive list so
  it appears alongside your other directives
- Summaries are filled/reflowed with =fill-region= for readable output

#+CAPTION: Summary output in an Org buffer
[[./assets/usage.png]]

[[./assets/summary.png]]

* Requirements

- Emacs 28.1+
- [[https://github.com/skeeto/elfeed][elfeed]]
- [[https://github.com/karthink/gptel][gptel]] (with a configured backend)

* Installation

** straight.el / use-package

#+begin_src emacs-lisp
(use-package elfeed-ai
  :straight (:host github :repo "danielfleischer/elfeed-ai")
  :hook (elfeed-search-mode . elfeed-ai-mode))

;; Example specifying the version-control backend explicitly
(use-package elfeed-ai
  :vc (elfeed-ai :url "https://github.comdanielfleischer/elfeed-ai")
  :hook (elfeed-search-mode . elfeed-ai-mode))
#+end_src


** Manual

Clone the repo, add it to your =load-path=, then:

#+begin_src emacs-lisp
(require 'elfeed-ai)
(add-hook 'elfeed-search-mode-hook #'elfeed-ai-mode)
#+end_src

* Usage

1. Open elfeed with =M-x elfeed=
2. Navigate to entries and press =m= to mark them for summarization
   (the =summarize= tag appears on each marked entry)
3. Press =S= to open the elfeed-ai menu
4. Optionally press =g= to open the full gptel menu and configure
   the model, backend, system prompt, temperature, etc.
5. Press =s= to summarize — results appear asynchronously in =*elfeed-ai*=


* Keybindings

These are active when =elfeed-ai-mode= is enabled:

| Key | Command                  | Description                          |
|-----+--------------------------+--------------------------------------|
| =m=   | =elfeed-ai-mark=           | Mark entry for summarization         |
| =u=   | =elfeed-ai-unmark=         | Unmark entry                         |
| =U=   | =elfeed-ai-unmark-all=     | Unmark all entries in current search |
| =S=   | =elfeed-ai-menu=           | Open the summarization transient     |
| =s=   | =elfeed-ai-summarize=      | (inside menu) Run summarization      |
| =g=   | =gptel-menu=               | (inside menu) Configure gptel        |

* Configuration

** System prompt

#+begin_src emacs-lisp
(setq elfeed-ai-system-prompt
      "Summarize this article in 3 bullet points. Be concise.")
#+end_src

** Output buffer name

#+begin_src emacs-lisp
(setq elfeed-ai-buffer-name "*my-summaries*")
#+end_src

** Choosing a model

Configure gptel as usual. To use a specific model for elfeed-ai, set
it via the gptel menu (=S= → =g=) before summarizing — the choice is
reflected in the =#+MODEL:= header of the output buffer.

* License

GPLv3. See [[./LICENSE]] or the header of =elfeed-ai.el=.
